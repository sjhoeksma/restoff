(function(){"use strict";function e(){var e=Object.create(t.prototype);return e._isOnline=!1,e._forcedOffline=!1,e}function t(){}var n=this,i=n.restlib||{};i["version-library"]="0.0.7","undefined"!=typeof module&&module.exports?module.exports=i:n.restlib=i,t.prototype=Object.create(Object.prototype,{isForcedOffline:{get:function(){return this._forcedOffline}},forcedOffline:{set:function(e){this._forcedOffline=!0,this._isOnline=!1}},isOnline:{get:function(){return this._isOnline},set:function(e){this._isOnline=e}},getRequest:{get:function(){var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return this.isForcedOffline?(e.__defineGetter__("readyState2",function(){return e.__proto__.DONE}),e.send=function(){this.onreadystatechange()}):e.__defineGetter__("readyState2",function(){return this.readyState}),e}}}),t.prototype.get=function(e){var t=this,n=new Promise(function(n,i){var r=t.getRequest;r.open("GET",e,!0),r.onreadystatechange=function(){if(r.__proto__.DONE==r.readyState2)if(r.__proto__.UNSENT==r.status){var e={offlineData:!0};n(e)}else if(200==r.status)t.isOnline=!0,n(JSON.parse(r.response));else{var s={message:r.statusText,messageDetail:r.responseText.replace(/\r?\n|\r/g,""),status:r.status};i(s)}},r.send()});return n},i.restoff=e}).call(this);